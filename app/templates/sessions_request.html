<div class="modal-header">
  <button type="button" class="close" ng-click="cancel()">&times;</button>
  <h3 ng-if="!reschedule" class="modal-title">Create a tutoring session request</h3>
  <h3 ng-if="reschedule" class="modal-title">Reschedule this session</h3>
</div>

<div class="modal-body" id="modal-body">
  <form name="sessionForm" ng-submit="sessionForm.$valid && submit(session)">

    <div class="form-group" ng-class="{ 'has-error': false}">
      <label>Date:</label>
      <div class="input-group" moment-picker="session.date" format="DD/MM/YYYY" today="true">
        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
        <input class="form-control" placeholder="Select a date" ng-model="session.date" ng-model-options="{updateOn: 'blur'}">
      </div>
    </div>

    <div class="form-group no-header" ng-class="{ 'has-error': false}">
      <label>Time:</label>
      <div class="input-group" moment-picker="session.time" format="LT">
        <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
        <input class="form-control" placeholder="Select a date" ng-model="session.time" ng-model-options="{updateOn: 'blur'}">
      </div>
    </div>

    <div class="form-group" ng-class="{ 'has-error': false}">
      <label for="text">Student Number:</label>
      <input ng-if="!reschedule" type="text" class="form-control" name="student" ng-pattern="/^[0-9]{8}$/" ng-model="session.student.id" required>
      <p ng-if="reschedule">{{session.friend}}</p>
    </div>

    <div class="form-group">
      <label for="text">Unit:</label>
      <ui-select ng-if="!reschedule" ng-model="session.unit" theme="bootstrap" title="Choose a unit">
      <ui-select-match placeholder="Search for Units...">{{$select.selected.unitID}}</ui-select-match>
      <ui-select-choices repeat="unit in availableUnits | filter: { unitID: $select.search } | limitTo: ($select.search.length <= 3) ? 0 : undefined">
      <span ng-bind-html="unit.unitID | highlight: $select.search"></span>
      <small ng-bind-html="unit.unitName | highlight: $select.search"></small>
      </ui-select-choices>
      </ui-select>
      <p ng-if="reschedule">{{session.unit}}</p>
    </div>

    <div class="form-group" ng-class="{ 'has-error': false}">
      <label for="text">Additional comments (optional):</label>
      <textarea class="form-control" rows="4" cols="50" ng-model="session.notes"></textarea>
    </div>

    <div class="errorMessageBox">{{errorMsg}}</div>
    <button type="submit" class="btn btn-default">Submit</button>
  </form>
</div>
